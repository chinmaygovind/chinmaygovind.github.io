

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>404</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        html, body { height: 100%; margin: 0; padding: 0; }
        body { background: #222; color: #fff; font-family: 'Press Start 2P', monospace; width: 100vw; height: 100vh; overflow: hidden; }
        #gameCanvas { position: absolute; top: 0; left: 0; width: 100vw; height: 100vh; display: block; background: #111; }
        #winMessage { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -60%); color: #ffd700; font-size: 2.2vw; text-align: center; font-family: 'Press Start 2P', monospace; display: none; }
    </style>
</head>
<body>

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>404</title>
        <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
        <style>
            html, body { height: 100%; margin: 0; padding: 0; }
            body { background: #222; color: #fff; font-family: 'Press Start 2P', monospace; width: 100vw; height: 100vh; overflow: hidden; }
            #gameCanvas { position: absolute; top: 0; left: 0; width: 100vw; height: 100vh; display: block; background: #111; }
            #winMessage { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -60%); color: #ffd700; font-size: 2.2vw; text-align: center; font-family: 'Press Start 2P', monospace; display: none; }
        </style>
    </head>
    <body>
        <canvas id="gameCanvas" width="1280" height="720"></canvas>
        <div id="winMessage">good job</div>
        <div id="loseMessage" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -60%); color: #f44336; font-size: 2.2vw; text-align: center; font-family: 'Press Start 2P', monospace; display: none;">
            <div id="loseText">You lost!</div>
            <div id="redirectText" style="color: #fff; font-size: 1.2vw; margin-top: 1vw;">redirecting you to home page...</div>
        </div>
        <audio id="winSound" src="home/audio/win.mp3"></audio>
        <audio id="loseSound" src="home/audio/death.mp3"></audio>
        <audio id="bongSound" src="home/audio/smb_bump.wav"></audio>
        <audio id="breakSound" src="home/audio/smb_breakblock.wav"></audio>
        <script>
            // Brick Breaker Game Fullscreen
            const canvas = document.getElementById("gameCanvas");
            const ctx = canvas.getContext("2d");
            let winSound = document.getElementById("winSound");
            let winMessage = document.getElementById("winMessage");

            // Game variables (declare before any function calls)
            let ballRadius = 12;
            let paddleHeight = 24;
            let paddleWidth = 160;
            let brickRowCount = 6;
            let brickColumnCount = 10;
            let brickWidth = 100;
            let brickHeight = 32;
            let brickPadding = 12;
            let brickOffsetTop = 80;
            let brickOffsetLeft = 32;
            let bricks = [];
            let score = 0;
            let totalBricks = brickRowCount * brickColumnCount;
            let gameWon = false;
            let gameStarted = false;

            let x, y, dx, dy, paddleX, rightPressed, leftPressed;

            // Responsive canvas (true fullscreen)
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                // Center bricks horizontally and move higher vertically
                brickOffsetLeft = (canvas.width - (brickColumnCount * brickWidth + (brickColumnCount - 1) * brickPadding)) / 2;
                brickOffsetTop = Math.max(24, (canvas.height - (brickRowCount * brickHeight + (brickRowCount - 1) * brickPadding)) / 8);
                // Center paddle
                if (!gameStarted) {
                    paddleX = (canvas.width - paddleWidth) / 2;
                }
            }
            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();

            function resetGameVars() {
                x = canvas.width / 2;
                y = canvas.height - 60;
                dx = 6;
                dy = -6;
                // Center paddle
                paddleX = (canvas.width - paddleWidth) / 2;
                // Center bricks and move higher vertically
                brickOffsetLeft = (canvas.width - (brickColumnCount * brickWidth + (brickColumnCount - 1) * brickPadding)) / 2;
                brickOffsetTop = Math.max(24, (canvas.height - (brickRowCount * brickHeight + (brickRowCount - 1) * brickPadding)) / 8);
                rightPressed = false;
                leftPressed = false;
                bricks = [];
                score = 0;
                gameWon = false;
                for(let c=0; c<brickColumnCount; c++) {
                    bricks[c] = [];
                    for(let r=0; r<brickRowCount; r++) {
                        bricks[c][r] = { x: 0, y: 0, status: 1 };
                    }
                }
            }
            resetGameVars();

            document.addEventListener("keydown", keyDownHandler, false);
            document.addEventListener("keyup", keyUpHandler, false);
            document.addEventListener("mousemove", mouseMoveHandler, false);

            function keyDownHandler(e) {
                if(e.code === "Space" && !gameStarted) {
                    gameStarted = true;
                }
                if(gameStarted) {
                    if(e.key === "Right" || e.key === "ArrowRight") {
                        rightPressed = true;
                    }
                    else if(e.key === "Left" || e.key === "ArrowLeft") {
                        leftPressed = true;
                    }
                }
            }
            function keyUpHandler(e) {
                if(gameStarted) {
                    if(e.key === "Right" || e.key === "ArrowRight") {
                        rightPressed = false;
                    }
                    else if(e.key === "Left" || e.key === "ArrowLeft") {
                        leftPressed = false;
                    }
                }
            }
            function mouseMoveHandler(e) {
                if(gameStarted) {
                    let relativeX = e.clientX - canvas.getBoundingClientRect().left;
                    if(relativeX > 0 && relativeX < canvas.width) {
                        paddleX = relativeX - paddleWidth/2;
                    }
                }
            }

            function collisionDetection() {
                let breakSound = document.getElementById("breakSound");
                for(let c=0; c<brickColumnCount; c++) {
                    for(let r=0; r<brickRowCount; r++) {
                        let b = bricks[c][r];
                        if(b.status === 1) {
                            if(x > b.x && x < b.x+brickWidth && y > b.y && y < b.y+brickHeight) {
                                dy = -dy;
                                b.status = 0;
                                score++;
                                breakSound.currentTime = 0;
                                breakSound.play();
                                if(score === totalBricks) {
                                    gameWon = true;
                                    winMessage.style.display = "block";
                                    winSound.play();
                                }
                            }
                        }
                    }
                }
            }

            function drawBall() {
                ctx.save();
                ctx.imageSmoothingEnabled = false;
                ctx.fillStyle = "#ffd700";
                ctx.shadowColor = "#fff";
                ctx.shadowBlur = 8;
                // Draw an octagon
                const sides = 8;
                const r = ballRadius;
                ctx.beginPath();
                for (let i = 0; i < sides; i++) {
                    const angle = (Math.PI * 2 / sides) * i;
                    const px = x + r * Math.cos(angle);
                    const py = y + r * Math.sin(angle);
                    if (i === 0) ctx.moveTo(px, py);
                    else ctx.lineTo(px, py);
                }
                ctx.closePath();
                ctx.fill();
                ctx.restore();
            }
            function drawPaddle() {
                ctx.save();
                ctx.beginPath();
                ctx.rect(paddleX, canvas.height-paddleHeight-24, paddleWidth, paddleHeight);
                ctx.fillStyle = "#2196f3";
                ctx.fill();
                ctx.lineWidth = 4;
                ctx.strokeStyle = "#1565c0";
                ctx.stroke();
                ctx.closePath();
                ctx.restore();
            }
            function drawBricks() {
                for(let c=0; c<brickColumnCount; c++) {
                    for(let r=0; r<brickRowCount; r++) {
                        if(bricks[c][r].status === 1) {
                            let brickX = (c*(brickWidth+brickPadding))+brickOffsetLeft;
                            let brickY = (r*(brickHeight+brickPadding))+brickOffsetTop;
                            bricks[c][r].x = brickX;
                            bricks[c][r].y = brickY;
                            // 8-bit retro brick: draw pixel border
                            ctx.beginPath();
                            ctx.rect(brickX, brickY, brickWidth, brickHeight);
                            ctx.fillStyle = "#ff9800";
                            ctx.fill();
                            ctx.lineWidth = 4;
                            ctx.strokeStyle = "#c67100";
                            ctx.stroke();
                            // Add pixel highlights
                            ctx.beginPath();
                            ctx.moveTo(brickX+4, brickY+4);
                            ctx.lineTo(brickX+brickWidth-4, brickY+4);
                            ctx.strokeStyle = "#fff176";
                            ctx.lineWidth = 2;
                            ctx.stroke();
                            ctx.closePath();
                        }
                    }
                }
            }
            function drawWalls() {
                ctx.save();
                ctx.lineWidth = 12;
                ctx.strokeStyle = "#fff";
                // Draw a full rectangle around the play area (canvas edges)
                ctx.beginPath();
                ctx.rect(0, 0, canvas.width, canvas.height);
                ctx.stroke();
                ctx.closePath();
                ctx.restore();
            }
            function drawScore() {
                ctx.font = "24px 'Press Start 2P', monospace";
                ctx.fillStyle = "#fff";
                ctx.textAlign = "center";
                ctx.textBaseline = "top";
                ctx.fillText("Score: " + score, canvas.width / 2, brickOffsetTop - 40);
            }
            function drawNotFoundMessage() {
                ctx.font = "32px 'Press Start 2P', monospace";
                ctx.fillStyle = "#fff";
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";
                ctx.fillText("404 - Not Found", canvas.width/2, canvas.height/2 - 40);
                ctx.font = "18px 'Press Start 2P', monospace";
                ctx.fillStyle = "#2d7ff9";
                ctx.fillText("CLICK HERE to return home", canvas.width/2, canvas.height/2 + 10);
                ctx.font = "16px 'Press Start 2P', monospace";
                ctx.fillStyle = "#f44336";
                ctx.fillText("or press SPACE to start", canvas.width/2, canvas.height/2 + 50);
            }
            canvas.addEventListener('click', function() {
                if(!gameStarted) {
                    window.location.href = "/";
                }
            });
            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                if(!gameStarted) {
                    drawNotFoundMessage();
                    requestAnimationFrame(draw);
                    return;
                }
                drawWalls();
                drawBricks();
                drawBall();
                drawPaddle();
                drawScore();
                collisionDetection();
                if(gameWon) return;
                // Ball movement and wall collision
                let bongSound = document.getElementById("bongSound");
                let hit = false;
                // Bounce off left/right canvas edges
                if(x + dx < ballRadius) {
                    dx = -dx;
                    hit = true;
                }
                if(x + dx > canvas.width - ballRadius) {
                    dx = -dx;
                    hit = true;
                }
                // Bounce off top canvas edge
                if(y + dy < ballRadius) {
                    dy = -dy;
                    hit = true;
                }
                // Paddle and bottom
                else if(y + dy > canvas.height-ballRadius-paddleHeight-24) {
                    if(x > paddleX && x < paddleX + paddleWidth) {
                        // Ball bounce angle depends on where it hits the paddle
                        let hitPos = (x - paddleX) / paddleWidth; // 0 (left) to 1 (right)
                        let angle = (hitPos - 0.5) * Math.PI / 2; // -PI/4 to PI/4
                        let speed = Math.sqrt(dx*dx + dy*dy);
                        dx = speed * Math.sin(angle);
                        dy = -Math.abs(speed * Math.cos(angle));
                        hit = true;
                    } else {
                        // Game over, show lose message, play sound, redirect
                        let loseMessage = document.getElementById("loseMessage");
                        let loseSound = document.getElementById("loseSound");
                        loseMessage.style.display = "block";
                        loseSound.currentTime = 0;
                        loseSound.play();
                        setTimeout(function() {
                            window.location.href = "/";
                        }, 5000);
                        // Stop game loop
                        return;
                    }
                }
                if(hit) {
                    bongSound.currentTime = 0;
                    bongSound.play();
                }
                x += dx;
                y += dy;
                if(rightPressed && paddleX < canvas.width-paddleWidth) {
                    paddleX += 14;
                }
                else if(leftPressed && paddleX > 0) {
                    paddleX -= 14;
                }
                requestAnimationFrame(draw);
            }
            draw();
        </script>
    </body>
    </html>